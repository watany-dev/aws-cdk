"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const aws_iam_1 = require("@aws-cdk/aws-iam");
const core_1 = require("@aws-cdk/core");
const integ_tests_1 = require("@aws-cdk/integ-tests");
const lib_1 = require("../lib");
const app = new core_1.App();
const stack = new core_1.Stack(app, 'aws-cdk-kms-hmac');
const role = new aws_iam_1.Role(stack, 'Role', {
    assumedBy: new aws_iam_1.AccountRootPrincipal(),
});
const key = new lib_1.Key(stack, 'MyHmacKey', {
    removalPolicy: core_1.RemovalPolicy.DESTROY,
    keyUsage: lib_1.KeyUsage.GENERATE_VERIFY_MAC,
    keySpec: lib_1.KeySpec.HMAC_512,
});
key.grantGenerateMac(role);
key.grantVerifyMac(role);
new integ_tests_1.IntegTest(app, 'HmacIntegTest', {
    testCases: [
        stack,
    ],
});
app.synth();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW50ZWcua2V5LWhtYWMuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyJpbnRlZy5rZXktaG1hYy50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOztBQUFBLDhDQUE4RDtBQUM5RCx3Q0FBMEQ7QUFDMUQsc0RBQWlEO0FBQ2pELGdDQUFnRDtBQUVoRCxNQUFNLEdBQUcsR0FBRyxJQUFJLFVBQUcsRUFBRSxDQUFDO0FBRXRCLE1BQU0sS0FBSyxHQUFHLElBQUksWUFBSyxDQUFDLEdBQUcsRUFBRSxrQkFBa0IsQ0FBQyxDQUFDO0FBRWpELE1BQU0sSUFBSSxHQUFHLElBQUksY0FBSSxDQUFDLEtBQUssRUFBRSxNQUFNLEVBQUU7SUFDbkMsU0FBUyxFQUFFLElBQUksOEJBQW9CLEVBQUU7Q0FDdEMsQ0FBQyxDQUFDO0FBRUgsTUFBTSxHQUFHLEdBQUcsSUFBSSxTQUFHLENBQUMsS0FBSyxFQUFFLFdBQVcsRUFBRTtJQUN0QyxhQUFhLEVBQUUsb0JBQWEsQ0FBQyxPQUFPO0lBQ3BDLFFBQVEsRUFBRSxjQUFRLENBQUMsbUJBQW1CO0lBQ3RDLE9BQU8sRUFBRSxhQUFPLENBQUMsUUFBUTtDQUMxQixDQUFDLENBQUM7QUFFSCxHQUFHLENBQUMsZ0JBQWdCLENBQUMsSUFBSSxDQUFDLENBQUM7QUFDM0IsR0FBRyxDQUFDLGNBQWMsQ0FBQyxJQUFJLENBQUMsQ0FBQztBQUV6QixJQUFJLHVCQUFTLENBQUMsR0FBRyxFQUFFLGVBQWUsRUFBRTtJQUNsQyxTQUFTLEVBQUU7UUFDVCxLQUFLO0tBQ047Q0FDRixDQUFDLENBQUM7QUFFSCxHQUFHLENBQUMsS0FBSyxFQUFFLENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBBY2NvdW50Um9vdFByaW5jaXBhbCwgUm9sZSB9IGZyb20gJ0Bhd3MtY2RrL2F3cy1pYW0nO1xuaW1wb3J0IHsgQXBwLCBSZW1vdmFsUG9saWN5LCBTdGFjayB9IGZyb20gJ0Bhd3MtY2RrL2NvcmUnO1xuaW1wb3J0IHsgSW50ZWdUZXN0IH0gZnJvbSAnQGF3cy1jZGsvaW50ZWctdGVzdHMnO1xuaW1wb3J0IHsgS2V5LCBLZXlTcGVjLCBLZXlVc2FnZSB9IGZyb20gJy4uL2xpYic7XG5cbmNvbnN0IGFwcCA9IG5ldyBBcHAoKTtcblxuY29uc3Qgc3RhY2sgPSBuZXcgU3RhY2soYXBwLCAnYXdzLWNkay1rbXMtaG1hYycpO1xuXG5jb25zdCByb2xlID0gbmV3IFJvbGUoc3RhY2ssICdSb2xlJywge1xuICBhc3N1bWVkQnk6IG5ldyBBY2NvdW50Um9vdFByaW5jaXBhbCgpLFxufSk7XG5cbmNvbnN0IGtleSA9IG5ldyBLZXkoc3RhY2ssICdNeUhtYWNLZXknLCB7XG4gIHJlbW92YWxQb2xpY3k6IFJlbW92YWxQb2xpY3kuREVTVFJPWSxcbiAga2V5VXNhZ2U6IEtleVVzYWdlLkdFTkVSQVRFX1ZFUklGWV9NQUMsXG4gIGtleVNwZWM6IEtleVNwZWMuSE1BQ181MTIsXG59KTtcblxua2V5LmdyYW50R2VuZXJhdGVNYWMocm9sZSk7XG5rZXkuZ3JhbnRWZXJpZnlNYWMocm9sZSk7XG5cbm5ldyBJbnRlZ1Rlc3QoYXBwLCAnSG1hY0ludGVnVGVzdCcsIHtcbiAgdGVzdENhc2VzOiBbXG4gICAgc3RhY2ssXG4gIF0sXG59KTtcblxuYXBwLnN5bnRoKCk7XG5cblxuIl19